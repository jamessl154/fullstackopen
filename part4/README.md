## part4
https://fullstackopen.com/en/part4

In this part we focused on learning and applying knowledge about software testing using the [Jest](https://jestjs.io/) testing framework whilst developing a backend for a blog-saving frontend app built in the next part. The first exercises required writing simple unit tests that are located in ```tests/blogs.test.js``` that rely on helper functions from ```utils/test_functions.js``` that I wrote with help of the [Lodash](https://lodash.com/) library.

We then wrote integration tests, found in ```tests/```, using [supertest](https://github.com/visionmedia/supertest) that enabled us to make HTTP requests to our API, then write tests that verified the expected result. We configured our ```npm run test``` script to set ```NODE_ENV=test``` that changes the MONGODB_URI in ```utils/config.js``` which allowed us to run the backend with a separate database for testing. We also specified the ```--runInBand``` option which made our tests run sequentially because they manipulate the database and so cannot run in parallel. In this part I also learned to develop using [TDD](https://en.wikipedia.org/wiki/Test-driven_development), the later exercises required writing tests before implementation in the code, then refactoring so that the tests would pass.

We went on to add users to the application. We handled hashing passwords to be stored using [bcrypt](https://github.com/kelektiv/node.bcrypt.js/) and added a one-to-many relationship between users and blogs collections in MongoDB using Mongoose models found in the ```models/``` directory. Finally, we added token based authentication using [JWT](https://jwt.io/) signed tokens and implemented required user-authentication for some routes in the Express server using custom middleware functions to extract the token. We also evaluated some solutions to the flaw of infinitely valid tokens in the current application. A token expiration timer is a potential solution but can be harmful to the user experience meanwhile server side sessions give the ability to revoke access at any time directly but likely hurt performance. The key-value database [Redis](https://redis.io/) could, for example, be used to improve this tradeoff.